# Code Analysis Method

## 1. Goal
Provide reproducible, file-level and line-level analysis artifacts without changing public APIs.

## 2. Machine Outputs (JSON only)
Generated by `tools/audit/generate-code-analysis-json.sh`:
- `artifacts/audit/code_inventory.json`
- `artifacts/audit/callgraph_inventory.json`
- `artifacts/audit/dead_code_candidates.json`
- `artifacts/audit/redundancy_candidates.json`
- `artifacts/audit/hardening_candidates.json`

## 3. Current Analysis Mode
Heuristic baseline (wave 1):
- declaration extraction by regex
- repository symbol reference counts
- repeated long-line redundancy heuristic
- broad exception catch detection

## 4. Escalation Path
For high-confidence refactors, each candidate must be validated by:
1. direct code inspection
2. failing/targeted test before change (where applicable)
3. passing regression tests after change

## 5. Repro
```bash
bash tools/audit/generate-code-analysis-json.sh
```
